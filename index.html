<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>진채형 파일아카이브</title>
  <link rel="icon" href="icon.png" type="image/png">
  
  <meta name="description" content="에뮬레이터, VPN, 웹 포팅 게임들을 빠르게 설치할 수 있는 아카이브">
  <meta name="keywords" content="에뮬레이터, VPN, 웹 포팅 게임, 파일 아카이브">
  <meta name="author" content="- 진채형 -">
  
  <meta property="og:title" content="진채형 파일아카이브">
  <meta property="og:description" content="에뮬레이터, VPN, 웹 포팅 게임들을 빠르게 설치할 수 있는 아카이브">
  <meta property="og:image" content="icon.png">
  <meta property="og:url" content="">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="진채형 파일아카이브">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="진채형 파일아카이브">
  <meta name="twitter:description" content="에뮬레이터, VPN, 웹 포팅 게임들을 빠르게 설치할 수 있는 아카이브">
  <meta name="twitter:image" content="icon.png">
  <script src="https://iframe.chat/scripts/main.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    @import url('https://cdn.jsdelivr.net/npm/galmuri@latest/dist/galmuri.css');

    @font-face {
        font-family: 'Galmuri11';
        src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/2506-1@1.0/Galmuri11-Bold.woff2') format('woff2');
        font-weight: 700;
        font-display: swap;
    }

    :root {
      --bg-primary: #0a0a0a;
      --bg-secondary: #111111;
      --bg-tertiary: #1a1a1a;
      --bg-card: rgba(22, 22, 22, 0.85);
      --bg-hover: rgba(30, 30, 30, 0.9);
      --bg-glass: rgba(255, 255, 255, 0.05);
      --bg-glass-hover: rgba(255, 255, 255, 0.1);
      --text-primary: #ffffff;
      --text-secondary: #a3a3a3;
      --text-muted: #737373;
      --border: rgba(255, 255, 255, 0.1);
      --border-hover: rgba(255, 255, 255, 0.2);
      --accent: #ffffff;
      --accent-soft: rgba(255, 255, 255, 0.1);
      --accent-hover: rgba(255, 255, 255, 0.15);
      --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.4);
      --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.4);
      --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.6);
      --shadow-glass: 0 8px 32px rgba(0, 0, 0, 0.3);
      --radius-sm: 8px;
      --radius-md: 12px;
      --radius-lg: 16px;
      --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      --transition-slow: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      --blur-sm: blur(8px);
      --blur-md: blur(16px);
      --blur-lg: blur(24px);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
      -webkit-user-drag: none;
      -webkit-touch-callout: none;
    }

    input, textarea {
      -webkit-user-select: text;
      -moz-user-select: text;
      -ms-user-select: text;
      user-select: text;
    }

    body {
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -khtml-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Galmuri11', 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.6;
      font-size: 14px;
      font-weight: 400;
      overflow-x: hidden;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      position: relative;
    }

    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background: url('https://i.pinimg.com/originals/dc/e6/59/dce659269993ee5c55a0543ecd2f159e.gif') center/cover;
      opacity: 0.3;
      z-index: -2;
      pointer-events: none;
      animation: bgFloat 30s ease-in-out infinite;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }

    @keyframes bgFloat {
      0%, 100% { transform: scale(1) rotate(0deg); }
      25% { transform: scale(1.1) rotate(1deg); }
      50% { transform: scale(1.05) rotate(-1deg); }
      75% { transform: scale(1.1) rotate(0.5deg); }
    }

    body::after {
      content: '';
      position: fixed;
      inset: 0;
      background: linear-gradient(135deg, 
        rgba(10, 10, 10, 0.85) 0%, 
        rgba(17, 17, 17, 0.75) 50%, 
        rgba(10, 10, 10, 0.85) 100%);
      z-index: -1;
      pointer-events: none;
      transition: opacity 0.3s ease, visibility 0.3s ease;
    }

    body.maximized-mode::before,
    body.maximized-mode::after {
      opacity: 0;
      visibility: hidden;
    }

    body.maximized-mode .header,
    body.maximized-mode .search-section,
    body.maximized-mode .category-section,
    body.maximized-mode .featured-section,
    body.maximized-mode .content-section,
    body.maximized-mode .scroll-top,
    body.maximized-mode .chat-widget {
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
    }

    ::-webkit-scrollbar {
      width: 0;
      background: transparent;
    }

    ::selection {
      background: var(--accent-soft);
      color: var(--text-primary);
    }

    .loading-overlay {
      position: fixed;
      inset: 0;
      background: var(--bg-primary);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      transition: opacity 0.3s ease;
    }

    .loading-icon {
      width: 80px;
      height: 80px;
      margin-bottom: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: loadingPulse 2s infinite;
    }

    .loading-icon img {
      width: 60px;
      height: 60px;
    }

    .loading-dots {
      display: flex;
      gap: 6px;
    }

    .loading-dot {
      width: 10px;
      height: 10px;
      background: var(--text-secondary);
      border-radius: 50%;
      animation: loadingPulse 1.4s infinite ease-in-out;
    }

    .loading-dot:nth-child(1) { animation-delay: 0s; }
    .loading-dot:nth-child(2) { animation-delay: 0.3s; }
    .loading-dot:nth-child(3) { animation-delay: 0.6s; }

    @keyframes loadingPulse {
      0%, 80%, 100% { opacity: 0.3; transform: scale(0.8); }
      40% { opacity: 1; transform: scale(1.2); }
    }

    .login-screen {
      position: fixed;
      inset: 0;
      background: linear-gradient(135deg, rgba(10, 10, 10, 0.95) 0%, rgba(17, 17, 17, 0.9) 100%);
      display: flex;
      z-index: 9998;
      overflow: hidden;
    }

    .login-screen::before {
      content: '';
      position: absolute;
      inset: 0;
      background: url('https://i.pinimg.com/originals/12/a9/3c/12a93cc7c92f1e805845265feb44185e.gif') center/cover;
      opacity: 0.4;
      z-index: 1;
    }

    .login-screen::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, 
        rgba(0, 0, 0, 0.7) 0%, 
        rgba(0, 0, 0, 0.5) 50%, 
        rgba(0, 0, 0, 0.8) 100%);
      z-index: 2;
    }

    .login-left {
      width: 40%;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px;
      position: relative;
      z-index: 3;
    }

    .login-card {
      width: 100%;
      max-width: 420px;
      padding: 60px 50px;
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: var(--blur-lg);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 20px;
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.6);
      transform: translateY(20px);
      animation: slideInUp 1s ease forwards;
      text-align: center;
    }

    .login-logo {
      width: 80px;
      height: 80px;
      margin: 0 auto 30px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .login-logo img {
      width: 60px;
      height: 60px;
    }

    @keyframes slideInUp {
      to { 
        transform: translateY(0); 
        opacity: 1;
      }
    }

    .login-title {
      font-size: 32px;
      font-weight: 700;
      margin-bottom: 16px;
      letter-spacing: -0.01em;
      color: white;
    }

    .login-subtitle {
      font-size: 16px;
      color: rgba(255, 255, 255, 0.8);
      margin-bottom: 50px;
    }

    .login-field {
      position: relative;
      margin-bottom: 40px;
    }

    .login-input {
      width: 100%;
      height: 60px;
      padding: 0 25px;
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: var(--blur-sm);
      border: 1px solid rgba(255, 255, 255, 0.3);
      border-radius: 15px;
      color: white;
      font-size: 16px;
      text-align: center;
      letter-spacing: 2px;
      transition: var(--transition);
    }

    .login-input:focus {
      outline: none;
      border-color: white;
      background: rgba(255, 255, 255, 0.15);
      box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.1);
    }

    .login-input::placeholder {
      color: rgba(255, 255, 255, 0.6);
    }

    .login-button {
      width: 100%;
      height: 60px;
      background: white;
      color: black;
      border: none;
      border-radius: 15px;
      font-size: 18px;
      font-weight: 700;
      cursor: pointer;
      transition: var(--transition);
      position: relative;
      overflow: hidden;
    }

    .login-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 15px 40px rgba(255, 255, 255, 0.25);
    }

    .login-button:active {
      transform: translateY(0);
    }

    .login-right {
      width: 60%;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 3;
    }

    .hero-content {
      text-align: center;
      padding: 60px;
    }

    .hero-title {
      font-size: clamp(48px, 10vw, 84px);
      font-weight: 700;
      color: white;
      text-shadow: 0 6px 25px rgba(0,0,0,0.8);
      letter-spacing: -0.02em;
      line-height: 1.1;
      margin-bottom: 30px;
      position: relative;
    }

    .typing-cursor {
      display: inline-block;
      background: white;
      width: 4px;
      animation: blink 1s infinite;
      margin-left: 3px;
    }

    @keyframes blink {
      0%, 50% { opacity: 1; }
      51%, 100% { opacity: 0; }
    }

    .hero-subtitle {
      font-size: 20px;
      color: rgba(255, 255, 255, 0.9);
      margin: 20px 0;
      transform: translateY(30px);
      opacity: 0;
      animation: fadeInUp 1s ease 1.2s forwards;
    }

    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .app {
      display: none;
      min-height: 100vh;
      opacity: 0;
      animation: appFadeIn 0.6s ease 0.2s forwards;
    }

    @keyframes appFadeIn {
      to { opacity: 1; }
    }

    .header {
      padding: 40px 32px 24px;
      text-align: center;
      background: transparent;
      position: relative;
    }

    .site-title {
      font-size: clamp(36px, 6vw, 56px);
      font-weight: 700;
      letter-spacing: -0.02em;
      margin-bottom: 16px;
      background: linear-gradient(135deg, #ffffff 0%, #e0e0e0 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: 0 4px 15px rgba(0,0,0,0.3);
    }

    .site-subtitle {
      font-size: 16px;
      color: var(--text-secondary);
      font-weight: 500;
      margin-bottom: 0;
    }

    .search-section {
      padding: 32px;
      background: rgba(255, 255, 255, 0.03);
      backdrop-filter: var(--blur-lg);
      margin: 24px 32px;
      border-radius: 24px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: var(--shadow-glass);
    }

    .search-container {
      max-width: 1000px;
      margin: 0 auto;
      display: flex;
      gap: 24px;
      align-items: center;
      flex-wrap: wrap;
    }

    .search-field {
      flex: 2;
      min-width: 300px;
      position: relative;
    }

    .search-input {
      width: 100%;
      height: 64px;
      padding: 0 28px 0 68px;
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: var(--blur-md);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 32px;
      color: var(--text-primary);
      font-size: 16px;
      transition: var(--transition);
      box-shadow: var(--shadow-sm);
    }

    .search-input:focus {
      outline: none;
      background: rgba(255, 255, 255, 0.12);
      border-color: var(--accent);
      box-shadow: 0 0 0 4px var(--accent-soft), var(--shadow-md);
    }

    .search-input::placeholder {
      color: rgba(255, 255, 255, 0.9);
      font-weight: 500;
    }

    .search-icon {
      position: absolute;
      left: 26px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-primary);
      font-size: 20px;
      pointer-events: none;
    }

    .filter-select {
      flex: 1;
      min-width: 180px;
      height: 64px;
      padding: 0 24px;
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: var(--blur-md);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 32px;
      color: var(--text-primary);
      font-size: 16px;
      cursor: pointer;
      transition: var(--transition);
      box-shadow: var(--shadow-sm);
    }

    .filter-select option {
      background-color: white;
      color: black;
      padding: 12px;
    }

    .category-section {
      padding: 24px 32px 32px;
      background: transparent;
      overflow: visible !important;
    }

    .category-list {
      max-width: 1000px;
      margin: 0 auto;
      display: flex;
      gap: 16px;
      flex-wrap: wrap;
      justify-content: center;
      overflow: visible !important;
    }

    .category-tag {
      padding: 16px 28px;
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: var(--blur-md);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 50px;
      color: var(--text-secondary);
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      white-space: nowrap;
      box-shadow: var(--shadow-sm);
      position: relative;
      transform-origin: center center;
      z-index: 1;
    }

    .category-tag:hover,
    .category-tag.active {
      background: var(--accent);
      color: var(--bg-primary);
      border-color: var(--accent);
      transform: translateY(-3px) scale(1.05);
      box-shadow: var(--shadow-lg);
      z-index: 10;
    }

    .featured-section {
      padding: 32px 32px 24px;
      background: transparent;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      margin-bottom: 24px;
    }

    .featured-container {
      max-width: 1400px;
      margin: 0 auto;
    }

    .featured-title {
      font-size: 32px;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 32px;
      text-align: center;
      background: linear-gradient(135deg, #ffffff 0%, #e0e0e0 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .featured-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
      gap: 32px;
    }

    .featured-card {
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: var(--blur-lg);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 28px;
      overflow: hidden;
      cursor: pointer;
      transition: var(--transition-slow);
      box-shadow: 0 16px 52px rgba(0, 0, 0, 0.4);
      position: relative;
      min-height: 420px;
    }

    .featured-card:hover {
      transform: translateY(-8px);
      border-color: rgba(255, 255, 255, 0.25);
      box-shadow: 0 28px 76px rgba(0, 0, 0, 0.5);
    }

    .featured-image {
      width: 100%;
      height: 260px;
      object-fit: cover;
      border-radius: 28px 28px 0 0;
    }

    .featured-content {
      padding: 40px;
      position: relative;
    }

    .featured-item-title {
      font-size: 26px;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 16px;
      line-height: 1.3;
    }

    .featured-description {
      font-size: 16px;
      color: var(--text-secondary);
      line-height: 1.7;
      margin-bottom: 28px;
    }

    .featured-badge {
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(255, 215, 0, 0.9);
      color: #000;
      padding: 10px 18px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .featured-play-btn {
      width: 100%;
      height: 56px;
      background: linear-gradient(135deg, #ffffff 0%, #f0f0f0 100%);
      color: #000;
      border: none;
      border-radius: 16px;
      font-size: 18px;
      font-weight: 700;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
    }

    .featured-play-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 32px rgba(255, 255, 255, 0.3);
    }

    .content-section {
      padding: 24px 32px 120px;
      background: transparent;
    }

    .content-container {
      max-width: 1400px;
      margin: 0 auto;
    }

    .items-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
      gap: 32px;
      opacity: 0;
      animation: gridFadeIn 0.6s ease 0.3s forwards;
    }

    @keyframes gridFadeIn {
      to { opacity: 1; }
    }

    .item-card {
      background: rgba(255, 255, 255, 0.06);
      backdrop-filter: var(--blur-lg);
      border: 1px solid rgba(255, 255, 255, 0.12);
      border-radius: 24px;
      padding: 40px;
      transition: var(--transition-slow);
      cursor: pointer;
      position: relative;
      overflow: hidden;
      opacity: 0;
      transform: translateY(20px);
      animation: cardSlideUp 0.6s ease forwards;
      box-shadow: 0 12px 44px rgba(0, 0, 0, 0.3);
    }

    .item-card.favorite {
      border-color: #ef4444;
      background: rgba(239, 68, 68, 0.08);
    }

    .item-card:hover {
      transform: translateY(-12px);
      border-color: rgba(255, 255, 255, 0.25);
      box-shadow: 0 24px 68px rgba(0, 0, 0, 0.4);
      background: rgba(255, 255, 255, 0.1);
    }

    @keyframes cardSlideUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .card-header {
      display: flex;
      align-items: center;
      gap: 24px;
      margin-bottom: 32px;
    }

    .item-icon {
      width: 56px;
      height: 56px;
      border-radius: 16px;
      object-fit: cover;
      border: 2px solid rgba(255, 255, 255, 0.2);
      transition: var(--transition);
      box-shadow: var(--shadow-sm);
    }

    .item-title {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-primary);
      line-height: 1.4;
      flex: 1;
    }

    .card-actions {
      display: flex;
      gap: 16px;
    }

    .action-btn {
      flex: 1;
      height: 52px;
      padding: 0 24px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 16px;
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: var(--blur-sm);
      color: var(--text-primary);
      font-size: 14px;
      font-weight: 700;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      box-shadow: var(--shadow-sm);
    }

    .action-btn:hover {
      background: rgba(255, 255, 255, 0.15);
      border-color: rgba(255, 255, 255, 0.3);
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }

    .action-btn.primary {
      background: var(--accent);
      color: var(--bg-primary);
      border-color: var(--accent);
    }

    .favorite-btn {
      width: 52px;
      padding: 0;
    }

    .favorite-btn.active {
      color: #ef4444;
      border-color: #ef4444;
      background: rgba(239, 68, 68, 0.15);
    }

    /* 최소화 아이콘 개선 - 잘림 방지 강화 */
    .minimized-windows {
      position: fixed;
      left: 24px;
      top: 50%;
      transform: translateY(-50%);
      display: flex;
      flex-direction: column;
      gap: 16px;
      z-index: 1500;
      max-height: 70vh;
      overflow: visible !important; /* 중요: 오버플로 허용 */
      padding: 16px; /* 클리핑 방지를 위한 패딩 증가 */
      /* 부모 요소들의 제약 완전 해제 */
      contain: none !important;
      clip-path: none !important;
      mask: none !important;
    }

    .minimized-icon {
      width: 72px;
      height: 72px;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: var(--blur-md);
      border: 2px solid rgba(255, 255, 255, 0.15);
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: var(--transition);
      box-shadow: var(--shadow-glass);
      position: relative;
      overflow: visible !important;
      z-index: 1;
      /* 모든 제약 해제 */
      contain: none !important;
      clip-path: none !important;
      mask: none !important;
    }

    .minimized-icon:hover {
      transform: translateX(12px) scale(1.1);
      border-color: rgba(255, 255, 255, 0.3);
      box-shadow: var(--shadow-lg);
      z-index: 100; /* 호버 시 최상단 */
      /* 호버 시에도 제약 없음 */
      overflow: visible !important;
      contain: none !important;
    }

    .minimized-icon img {
      width: 44px;
      height: 44px;
      border-radius: 10px;
      object-fit: cover;
    }

    /* 이미지 로드 실패 대체 아이콘 */
    .minimized-icon .fallback-icon {
      display: none;
      font-size: 24px;
      color: var(--text-secondary);
    }

    .minimized-icon img.failed + .fallback-icon {
      display: block;
    }

    .minimized-icon img.failed {
      display: none;
    }

    .close-all-btn {
      width: 72px;
      height: 36px;
      background: rgba(239, 68, 68, 0.9);
      backdrop-filter: var(--blur-md);
      border: 1px solid rgba(239, 68, 68, 0.8);
      border-radius: 16px;
      color: white;
      font-size: 11px;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-top: 12px;
    }

    /* 기존 툴팁 스타일 완전 제거, 새로운 방식 사용 */

    .window-container {
      position: fixed;
      z-index: 2000;
      display: none;
      pointer-events: auto;
    }

    .window-container.active {
      display: block;
    }

    .iframe-window {
      background: rgba(22, 22, 22, 0.95);
      backdrop-filter: var(--blur-lg);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 16px;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      box-shadow: 0 28px 88px rgba(0, 0, 0, 0.6);
      resize: both;
      min-width: 600px;
      min-height: 400px;
      width: 900px;
      height: 650px;
    }

    .iframe-window.maximized {
      width: 100vw !important;
      height: 100vh !important;
      border-radius: 0;
      resize: none;
    }

    .window-header {
      padding: 24px 28px;
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: var(--blur-md);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      justify-content: space-between;
      user-select: none;
      cursor: move;
      min-height: 76px;
    }

    .window-header.no-drag {
      cursor: default !important;
    }

    .window-title {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-primary);
      flex: 1;
    }

    .window-controls {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .window-btn {
      width: 44px;
      height: 44px;
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: var(--blur-sm);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 12px;
      color: var(--text-secondary);
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
    }

    .window-btn:hover {
      background: rgba(255, 255, 255, 0.15);
      color: var(--text-primary);
      border-color: rgba(255, 255, 255, 0.25);
    }

    .window-content {
      flex: 1;
      position: relative;
      overflow: hidden;
    }

    .window-iframe {
      width: 100%;
      height: 100%;
      border: none;
      border-radius: 0 0 16px 16px;
      background: white;
      /* 크로스 오리진 보안 개선 */
      sandbox: "allow-scripts allow-same-origin allow-popups allow-forms allow-pointer-lock allow-modals";
    }

    .window-overlay {
      position: absolute;
      inset: 0;
      z-index: 10;
      display: none;
      background: transparent;
      pointer-events: none;
    }

    .resize-handle {
      position: absolute;
      bottom: 0;
      right: 0;
      width: 28px;
      height: 28px;
      background: linear-gradient(-45deg, transparent 40%, rgba(255, 255, 255, 0.2) 40%, rgba(255, 255, 255, 0.2) 60%, transparent 60%);
      cursor: se-resize;
      border-radius: 0 0 16px 0;
    }

    .empty-state {
      text-align: center;
      padding: 120px 32px;
      opacity: 0;
      animation: emptyFadeIn 0.6s ease 0.4s forwards;
    }

    @keyframes emptyFadeIn {
      to { opacity: 1; }
    }

    .empty-icon {
      font-size: 72px;
      color: var(--text-muted);
      margin-bottom: 28px;
      opacity: 0.6;
    }

    .empty-title {
      font-size: 26px;
      font-weight: 700;
      color: var(--text-secondary);
      margin-bottom: 14px;
    }

    .empty-text {
      font-size: 16px;
      color: var(--text-muted);
    }

    .scroll-top {
      position: fixed;
      bottom: 44px;
      right: 140px;
      width: 64px;
      height: 64px;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: var(--blur-md);
      color: var(--text-primary);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 50%;
      cursor: pointer;
      transition: var(--transition-slow);
      opacity: 0;
      visibility: hidden;
      z-index: 100;
      box-shadow: var(--shadow-glass);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .scroll-top.visible {
      opacity: 1;
      visibility: visible;
    }

    .scroll-top:hover {
      transform: translateY(-6px) scale(1.1);
      box-shadow: var(--shadow-lg);
      background: rgba(255, 255, 255, 0.15);
    }

    .chat-widget {
      position: fixed;
      bottom: 24px;
      right: 24px;
      width: 420px;
      height: 520px;
      background: rgba(22, 22, 22, 0.95);
      backdrop-filter: var(--blur-lg);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 24px;
      display: none;
      flex-direction: column;
      overflow: hidden;
      box-shadow: 0 24px 68px rgba(0, 0, 0, 0.5);
      z-index: 1000;
      transition: var(--transition-slow);
    }

    .chat-widget.active {
      display: flex;
    }

    .chat-header {
      padding: 24px;
      background: rgba(255, 255, 255, 0.05);
      backdrop-filter: var(--blur-md);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .chat-title {
      font-size: 16px;
      font-weight: 700;
      color: var(--text-primary);
    }

    .chat-close {
      width: 32px;
      height: 32px;
      background: rgba(255, 255, 255, 0.1);
      border: none;
      border-radius: 10px;
      color: var(--text-secondary);
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .chat-close:hover {
      background: rgba(255, 255, 255, 0.2);
      color: var(--text-primary);
    }

    .chat-content {
      flex: 1;
      padding: 24px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
    }

    .chat-placeholder {
      color: var(--text-secondary);
      margin-bottom: 24px;
    }

    .chat-link {
      padding: 14px 28px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 14px;
      color: var(--text-primary);
      text-decoration: none;
      transition: var(--transition);
    }

    .chat-link:hover {
      background: rgba(255, 255, 255, 0.15);
      border-color: rgba(255, 255, 255, 0.3);
    }

    .chat-toggle {
      position: fixed;
      bottom: 24px;
      right: 24px;
      width: 64px;
      height: 64px;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: var(--blur-md);
      border: 1px solid rgba(255, 255, 255, 0.15);
      border-radius: 50%;
      color: var(--text-primary);
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1001;
      font-size: 26px;
      box-shadow: var(--shadow-glass);
    }

    .chat-toggle:hover {
      transform: scale(1.1);
      background: rgba(255, 255, 255, 0.15);
      box-shadow: var(--shadow-lg);
    }

    .chat-widget.active + .chat-toggle {
      display: none;
    }

    @keyframes minimizeToIcon {
      0% {
        opacity: 1;
        transform: scale(1);
      }
      100% {
        opacity: 0;
        transform: scale(0.1) translate(-400px, -250px);
      }
    }

    @keyframes restoreFromIcon {
      0% {
        opacity: 0;
        transform: scale(0.1) translate(-400px, -250px);
      }
      100% {
        opacity: 1;
        transform: scale(1) translate(0, 0);
      }
    }

    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateX(-50%) translateY(-25px);
      }
      to {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
      }
    }

    .notification {
      animation: slideDown 0.3s ease;
    }

    @media (max-width: 768px) {
      .search-container {
        flex-direction: column;
        gap: 16px;
      }

      .search-field,
      .filter-select {
        min-width: 100%;
      }

      .category-list {
        justify-content: flex-start;
        overflow-x: auto;
        padding-bottom: 12px;
      }

      .items-grid {
        grid-template-columns: 1fr;
        gap: 24px;
      }

      .featured-grid {
        grid-template-columns: 1fr;
      }

      .minimized-windows {
        left: 20px;
      }

      .minimized-icon {
        width: 64px;
        height: 64px;
      }

      .iframe-window {
        min-width: 350px;
        min-height: 300px;
        width: 95vw;
        height: 75vh;
      }

      .hero-title {
        font-size: clamp(32px, 8vw, 48px);
      }

      .chat-widget {
        width: 90vw;
        right: 5vw;
        left: 5vw;
      }

      .featured-card {
        min-height: 360px;
      }

      .featured-image {
        height: 220px;
      }

      .scroll-top {
        right: 100px;
      }
    }

    .error-shake {
      animation: shake 0.6s ease-in-out;
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
      20%, 40%, 60%, 80% { transform: translateX(5px); }
    }

    .window-container,
    .item-card,
    .minimized-icon,
    .chat-widget {
      will-change: transform;
      transform: translateZ(0);
    }

    .items-grid,
    .category-list {
      contain: layout style paint;
    }

    .window-iframe {
      will-change: auto;
      contain: layout style paint;
    }

    body.maximized-mode * {
      pointer-events: none;
    }

    body.maximized-mode .window-container.active,
    body.maximized-mode .window-container.active * {
      pointer-events: auto;
    }

    @media (prefers-reduced-motion: reduce) {
      * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
      }
    }

    .window-container:not(.active) .window-iframe {
      visibility: hidden;
    }

    @media (pointer: coarse) {
      .window-btn,
      .action-btn,
      .category-tag,
      .chat-toggle {
        min-height: 44px;
        min-width: 44px;
      }
    }
  </style>
</head>
<body>
  <div class="loading-overlay" id="loadingOverlay">
    <div class="loading-icon">
      <img src="icon.png" alt="로딩 아이콘" onerror="if(!this.dataset.failed){this.dataset.failed='true';this.style.display='none';}">
    </div>
    <div class="loading-dots">
      <div class="loading-dot"></div>
      <div class="loading-dot"></div>
      <div class="loading-dot"></div>
    </div>
  </div>

  <div class="login-screen" id="loginScreen">
    <div class="login-left">
      <div class="login-card">
        <div class="login-logo">
          <img src="icon.png" alt="로고" onerror="if(!this.dataset.failed){this.dataset.failed='true';this.style.display='none';}">
        </div>
        <h1 class="login-title">로그인</h1>
        <p class="login-subtitle">아카이브에 접근하려면 비밀번호를 입력하세요</p>
        <div class="login-field">
          <input 
            type="password" 
            id="passwordInput" 
            class="login-input" 
            placeholder="비밀번호"
            autocomplete="current-password"
          />
        </div>
        <button class="login-button" id="passwordSubmit">
          접속하기
        </button>
      </div>
    </div>
    <div class="login-right">
      <div class="hero-content">
        <h1 class="hero-title" id="heroTitle">
          <span id="typingText"></span><span class="typing-cursor"></span>
        </h1>
        <p class="hero-subtitle">쉽게 멀리가지 않고</p>
        <p class="hero-subtitle">사이트에서 깔끔하게 해결해보세요</p>
      </div>
    </div>
  </div>

  <div class="app" id="app">
    <div class="minimized-windows" id="minimizedWindows"></div>

    <header class="header">
      <h1 class="site-title">진채형 파일아카이브</h1>
      <p class="site-subtitle">1.1.0v</p>
    </header>

    <section class="search-section" id="searchSection">
      <div class="search-container">
        <div class="search-field">
          <i class="fas fa-search search-icon"></i>
          <input 
            type="text" 
            id="searchInput" 
            class="search-input" 
            placeholder="파일 검색 (초성검색 지원)..."
            autocomplete="off"
          />
        </div>
        
        <select class="filter-select" id="categoryFilter">
          <option value="all">전체</option>
          <option value="DS">닌텐도 DS</option>
          <option value="Wii">닌텐도 Wii</option>
          <option value="Switch">스위치</option>
          <option value="VPN">VPN</option>
          <option value="Other">기타</option>
          <option value="포팅게임">포팅게임</option>
          <option value="설치게임">설치게임</option>
        </select>
      </div>
    </section>

    <section class="category-section">
      <div class="category-list" id="categoryList"></div>
    </section>

    <section class="featured-section" id="featuredSection">
      <div class="featured-container">
        <h2 class="featured-title">◇ 이번달의 추천게임 ◇</h2>
        <div class="featured-grid" id="featuredGrid"></div>
      </div>
    </section>

    <main class="content-section">
      <div class="content-container">
        <div class="items-grid" id="itemsGrid"></div>
        
        <div class="empty-state" id="emptyState" style="display: none;">
          <i class="fas fa-search empty-icon"></i>
          <h3 class="empty-title">검색 결과가 없습니다</h3>
          <p class="empty-text">다른 키워드로 검색해보세요</p>
        </div>
      </div>
    </main>

    <button class="scroll-top" id="scrollTop">
      <i class="fas fa-arrow-up"></i>
    </button>

    <div class="chat-widget" id="chatWidget">
      <div class="chat-header">
        <h3 class="chat-title">채팅</h3>
        <button class="chat-close" id="chatClose">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="chat-content">
        <iframe id="chatFrame" src="https://iframe.chat/embed?chat=10836812" style="width: 100%; height: 100%; border: none; border-radius: 12px; background: rgba(255,255,255,0.1);" sandbox="allow-scripts allow-same-origin allow-popups allow-forms"></iframe>
      </div>
    </div>

    <button class="chat-toggle" id="chatToggle">
      <i class="fas fa-comments"></i>
    </button>
  </div>

  <script>
    const FEATURED_ITEMS = [
      {
        title: "태고의 달인",
        image: "https://www.gematsu.com/wp-content/uploads/2022/02/Game-Page-Featured_Taiko-no-Tatsujin-Rhythm-Festival-Inits.jpg",
        description: "태고의 달인은 커다란 북을 두드리며 빨간색과 파란색을 박자에 맞춰 치는 일본식 리듬게임입니다! J-POP,애니음악,게임음악,대중음악 등 다양한 곡과 여러 난이도를 지원해 혼자나 친구랑 같이 편하게 할 수 있어요!",
        url: "https://cjdgrevival.com/",
        iframe: true
      },
      {
        title: "언더테일",
        image: "https://i.pinimg.com/736x/9a/2a/a3/9a2aa3ccba5c3bce83e2e3f0a607c147.jpg",
        description: "독창적인 스토리텔링과 선택의 중요성을 강조하는 인디 RPG 게임이에요. 언더테일은 플레이어가 몬스터와 싸움 대신 설득하거나 친해지며 선택에 따라 다양한 결말을 경험하는 게임이에요!",
        url: "https://www.autistici.org/burnedprojects/UNDERTALE/",
        iframe: true
      }
    ];

    const GAME_DATA = [
      {
        icon: "https://tse3.mm.bing.net/th/id/OIP.t8f1Eq2m6okGkEGyrSRJvAHaEK?w=309&h=180&c=7&r=0&o=5&pid=1.7",
        title: "프로톤VPN",
        url: "https://github.com/ProtonVPN/win-app/releases/download/4.2.1/ProtonVPN_v4.2.1_x64.exe",
        category: "VPN",
        iframe: false
      },
      {
        icon: "https://th.bing.com/th/id/R.2a527448abbb085f6c89793cfb5f65f5?rik=A7ss82CSOJPrkg&riu=http%3a%2f%2fvignette2.wikia.nocookie.net%2fgeometry-dash%2fimages%2f9%2f90%2fGeometryDash.png%2frevision%2flatest%3fcb%3d20160224042843&ehk=Hvk2rFdCmF08iQinZYieMsLbvo4NDNdKYic8xB6GqZE%3d&risl=&pid=ImgRaw&r=0",
        title: "지오메트리대쉬",
        url: "https://drive.usercontent.google.com/download?id=10pkH8IYH58pvl9awiittamCXoO9WhHO9&export=download",
        category: "설치게임",
        iframe: false
      },
      {
        icon: "https://th.bing.com/th?id=OIP.-2gC__2Z5ZUd_YHJsXUSIQAAAA&w=249&h=250&c=8&rs=1&qlt=90&o=6&cb=13&pid=3.1&rm=2",
        title: "오페라 GX 브라우저",
        url: "https://drive.usercontent.google.com/download?id=1kJKMHEUNofV-jJnPf2_K4p0L1g4Sy7C-&export=download&authuser=3",
        category: "Other",
        iframe: false
      },
      {
        icon: "https://img.poki-cdn.com/cdn-cgi/image/q=78,scq=50,width=314,height=314,fit=cover,f=auto/919c9f04db0404cf69fddf9c01e31d91/subway-surfers.png",
        title: "서브웨이 서퍼 클래식",
        url: "https://g2.igroutka.ru/games/164/ZXLa594fek6p7nVR/10/subway_surfers_classic/",
        category: "포팅게임",
        iframe: true
      },
      {
        icon: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/8e/Undertale_red_soul.svg/250px-Undertale_red_soul.svg.png",
        title: "언더테일 (Undertale)",
        url: "https://www.autistici.org/burnedprojects/UNDERTALE/",
        category: "포팅게임",
        iframe: true
      },
      {
        icon: "https://m.media-amazon.com/images/I/51hyuAbhjhL._UF1000,1000_QL80_.jpg",
        title: "델타룬 (Deltarune) 챕터 3~4",
        url: "https://html-classic.itch.zone/html/14658285/3-4new/index.html",
        category: "포팅게임",
        iframe: true
      },
      {
        icon: "https://i.pinimg.com/564x/1a/a0/11/1aa01192c778968f08d92879e654166f.jpg",
        title: "컵헤드 (Cuphead)",
        url: "https://html-classic.itch.zone/html/14775576/cuphead/index.html",
        category: "포팅게임",
        iframe: true
      },
      {
        icon: "https://i.redd.it/o6vyapvz9dl61.png",
        title: "피플 플레이그라운드 (People Playground)",
        url: "https://html-classic.itch.zone/html/14803006/ppg/index.html",
        category: "포팅게임",
        iframe: true
      },
      {
        icon: "https://img.itch.zone/aW1nLzE0ODcxMzAwLmpwZw==/original/TNb8k6.jpg",
        title: "시피",
        url: "https://sheepy.pages.dev/play",
        category: "포팅게임",
        iframe: true
      },
      {
        icon: "https://cdn.inspireuplift.com/uploads/images/seller_products/29800/1705763380_Pizzatowergamelogo.png",
        title: "피자타워 (Pizza Tower)",
        url: "https://www.autistici.org/burnedprojects/NoiseUpdate/",
        category: "포팅게임",
        iframe: true
      },
      {
        icon: "https://img.itch.zone/aW1nLzE4MDIwODUucG5n/original/M7FLNm.png",
        title: "얼불춤 (A Dance of Fire and Ice)",
        url: "https://html5-games.io/game/a-dance-of-fire-and-ice/",
        category: "포팅게임",
        iframe: true
      },
      {
        icon: "https://tse2.mm.bing.net/th/id/OIP.ShZ6WScsEFdO1Yb5NzuNHwHaEI?w=840&h=469&rs=1&pid=ImgDetMain",
        title: "철권6",
        url: "https://drive.usercontent.google.com/download?id=0B5kIILfG3p8INVg2TFVocUxkVVk&export=download&authuser=0",
        category: "설치게임",
        iframe: false
      },
      {
        icon: "https://cdn.freebiesupply.com/logos/large/2x/minecraft-1-logo-png-transparent.png",
        title: "마인크래프트 1.8.8",
        url: "https://eaglercraft.com/mc/1.8.8",
        category: "포팅게임",
        iframe: true
      },
      {
        icon: "https://cdn.freebiesupply.com/logos/large/2x/minecraft-1-logo-png-transparent.png",
        title: "마인크래프트 1.8.8 WASM (저수준)",
        url: "https://eaglercraft.com/mc/1.8.8-wasm",
        category: "포팅게임",
        iframe: true
      },
      {
        icon: "https://cdn.freebiesupply.com/logos/large/2x/minecraft-1-logo-png-transparent.png",
        title: "마인크래프트 1.12.2",
        url: "https://eaglercraft.com/mc/1.12.2",
        category: "포팅게임",
        iframe: true
      },
      {
        icon: "https://cdn.freebiesupply.com/logos/large/2x/minecraft-1-logo-png-transparent.png",
        title: "마인크래프트 1.12.2 WASM (저수준)",
        url: "https://eaglercraft.com/mc/1.12.2-wasm",
        category: "포팅게임",
        iframe: true
      },
      {
        icon: "https://tse1.mm.bing.net/th/id/OIP.QFf68XBnto3qJ7tqNErjZgHaGu?rs=1&pid=ImgDetMain",
        title: "닌텐도 DS 에뮬",
        url: "https://drive.usercontent.google.com/u/0/uc?id=1OZNNxC6S_CpOyOp66LHzJngteo_ZjpLR&export=download",
        category: "DS",
        iframe: false
      },
      {
        icon: "https://i.namu.wiki/i/IK8mUq98AkoWn926Kusal5HoqpuXmNKm0y52DMIRYIQO_2clPa8KfjZXaRhooz4u8vaHYvUWNHXUAeP9sbnMFw.webp",
        title: "슈퍼마리오 (DS)",
        url: "https://drive.usercontent.google.com/u/0/uc?id=1RmP1AuqXuwHYkzhfrT1m5HobO3S68YOd&export=download",
        category: "DS",
        iframe: false
      },
      {
        icon: "https://i.namu.wiki/i/uJ8C5vxNjrI-tB1bu_3zATdYzYzRQcdlvqZEpALWPwmbPRlt1GexU8JxC9pzDUc0uYjVPaGLZylLlF95YqQHFw.webp",
        title: "포켓몬 화이트 (DS)",
        url: "https://drive.google.com/uc?id=1rpxKQs-QJwztR0seBDH8bKUZ_vi9lktG&export=download",
        category: "DS",
        iframe: false
      },
      {
        icon: "https://i.namu.wiki/i/21zBjDhh81iPDbKpDUh62wgoENWI9Fi_C1ldzizcmwsNgbuwwkbsw6fJqClNp0g7k7tXD6tjaMM69UrKV0vkAA.webp",
        title: "포켓몬 블랙 (DS)",
        url: "https://drive.google.com/uc?id=100SPGRZvG4TjPTxDU0V69r7mPA3nvGvf&export=download",
        category: "DS",
        iframe: false
      },
      {
        icon: "https://img.danawa.com/prod_img/500000/795/953/img/1953795_1.jpg?_v=20161221141913",
        title: "와리오 (DS)",
        url: "https://drive.usercontent.google.com/uc?id=1-skzxeAaLumFN9oN__uPTyjMqn7yGnrJ&export=download",
        category: "DS",
        iframe: false
      },
      {
        icon: "https://img.danawa.com/prod_img/500000/691/975/img/1975691_1.jpg?_v=20151119102421",
        title: "리듬히어로 (DS)",
        url: "https://drive.usercontent.google.com/download?id=1FILA3W2Lzl-fTzHmBEEzFsVTkkyiscjQ&export=download&authuser=0",
        category: "DS",
        iframe: false
      },
      {
        icon: "https://img.danawa.com/prod_img/500000/388/927/img/927388_1.jpg?_v=20190207181514",
        title: "리듬세상 (DS)",
        url: "https://drive.google.com/file/d/1-XKqAI-MsyfLudtSEUXqvibKTwNg43OE/view",
        category: "DS",
        iframe: false
      },
      {
        icon: "https://mblogthumb-phinf.pstatic.net/20160813_19/minjaeofstar_1471083162621BkCjc_JPEG/mcds070405_01_hosipw.jpg?type=w420",
        title: "마리오카트 (DS)",
        url: "https://drive.usercontent.google.com/uc?id=0BzpZCKYa71okTUdNU0JWNEllMVU&export=download&resourcekey=0--KXRREfTw2Bwgcjl2kzs6A",
        category: "DS",
        iframe: false
      },
      {
        icon: "https://i.namu.wiki/i/mM9REnYN7HuRw9U7HGBCOTtamSt9tt3EAisvI8UuLxrFYi8ttwF_xPg3cy5BzpVWR2DJozj0H0fAtpXls_tKWQ.webp",
        title: "포켓몬 화이트2(DS)",
        url: "https://drive.usercontent.google.com/download?id=1v3qBwrN49Ntf6fCCOqzfbjRv-_2alBCa&export=download&authuser=0",
        category: "DS",
        iframe: false
      },
      {
        icon: "https://i.namu.wiki/i/YlUne4SpGZJbhOeuD-8UKwOYd1EEUefi4GHx5cDERVgg.webp",
        title: "포켓몬 블랙2(DS)",
        url: "https://drive.usercontent.google.com/download?id=1Xe6ENFnIU2Ydu-ResrDFnhucQFoD90c6&export=download&authuser=0",
        category: "DS",
        iframe: false
      },
      {
        icon: "https://i.namu.wiki/i/zKLIqvxvam7_WUbx7HaGZmOPMgo_b53jvhi2OrFlIYyvt0fAi1CgdCO5eo2cT-_v07Ta4byzzt0iyQJW2KyY7A.webp",
        title: "포켓몬 소울실버(DS)",
        url: "https://drive.usercontent.google.com/download?id=1QySQrSw5MOd3YAC2B5n5jK-YKx_9fVN1&export=download&authuser=0",
        category: "DS",
        iframe: false
      },
      {
        icon: "https://i.namu.wiki/i/qOh8xRWB1_DH6vop4SRI1F_LF86I7dAiYf3-DOLzzYMHtT4xi9TfEZLhxvdEYYeAMtUiTdwecTcAnnpA7ukbxw.webp",
        title: "포켓몬 디아루가(DS)",
        url: "https://drive.google.com/file/d/1Rl-y7Oc7feL4A4eDud2R-3kA9MLg6gyl/view",
        category: "DS",
        iframe: false
      },
      {
        icon: "https://i.namu.wiki/i/eW7OK-A_RYmdEL1K6188P-Mp9RWowmsFYpfHZZxzqjH8MVD0nYAU5FWu2VQZ9tww1eyzEv_vXZUba1BlK-xm3Q.webp",
        title: "포켓몬 펄기아(DS)",
        url: "https://drive.google.com/file/d/1YaLrOR-8hLa1FJhMdXJOHasdHw11xTsB/view",
        category: "DS",
        iframe: false
      },
      {
        icon: "https://i.namu.wiki/i/21zBjDhh81iPDbKpDUh62wgoENWI9Fi_C1ldzizcmwsNgbuwwkbsw6fJqClNp0g7k7tXD6tjaMM69UrKV0vkAA.webp",
        title: "짱구 크레용대작전(DS)",
        url: "https://drive.google.com/file/d/1QavLbPk-jE7LuMo2RP6Iq6r7LkrHXYha/view",
        category: "DS",
        iframe: false
      },
      {
        icon: "https://i.namu.wiki/i/Lle15DbVOMqmLsYiND-gcGukb1duSl4SNL00VUZV0TuCxbNP21WDBSrt5-gQDlNly8Cw6EUefi4GHx5cDERVgg.webp",
        title: "짱구 시네마랜드(DS)",
        url: "https://drive.google.com/file/d/1IG-KH9jQPYCGOd9wwlzJ2U_R2epxyBGY/view",
        category: "DS",
        iframe: false
      },
      {
        icon: "https://img.danawa.com/prod_img/500000/238/874/img/1874238_1.jpg?_v=20160727121344&shrink=360:360",
        title: "짱구 고무찰흙(DS)",
        url: "https://drive.google.com/file/d/1ADggzBxN0c132BUNxwuP1lkINcjPiaR4/view",
        category: "DS",
        iframe: false
      },
      {
        icon: "https://i.namu.wiki/i/9DfH-5uAbsXoMiGEpfws-SlUHf8dEBpAjWjz1u6t38VVTemSzJ7cag2rLpqZ2pUZnNh1PHRNM-1vRxZtl0mung.webp",
        title: "젤다 모래시계(DS)",
        url: "https://drive.google.com/file/d/1xm66jqRlg15nxqEJe9BVwzgfMFZp482r/view",
        category: "DS",
        iframe: false
      },
      {
        icon: "https://i.namu.wiki/i/3xXl68B1XfGD5Mvqq7c4-yAnNZ-EwQxdW_MdBmsOC-oC9BkHdKDWwc9vDq_003JdxkP-kuueu4P5SPwg2Xs5Tw.webp",
        title: "마법천자문(DS)",
        url: "https://drive.google.com/file/d/1FVjwpC7DDvaFWOwc8wK0ri2vy9eOxWKA/view",
        category: "DS",
        iframe: false
      },
      {
        icon: "https://img.danawa.com/prod_img/500000/406/684/img/684406_1.jpg?_v=20190207181841",
        title: "스폰지밥과 친구들(DS)",
        url: "https://drive.google.com/file/d/1VwnQ-bu8f6orlJDjH2a27LqErGQso8SQ/view",
        category: "DS",
        iframe: false
      },
      {
        icon: "https://img.danawa.com/prod_img/500000/586/952/img/952586_1.jpg?_v=20160822110837",
        title: "벤쿠버 동계올림픽(DS)",
        url: "https://drive.google.com/file/d/1R2Cji5n-qz2OEjsshvFRKXiuNkeWKUIM/view",
        category: "DS",
        iframe: false
      },
      {
        icon: "https://img.danawa.com/prod_img/500000/512/155/img/1155512_1.jpg?_v=20171102063010",
        title: "나루토vs사스케(DS)",
        url: "https://drive.google.com/file/d/1dBZdWEpQ8NPcyfp4HtdY5VpnNMw3DIc3/view",
        category: "DS",
        iframe: false
      },
      {
        icon: "https://img.danawa.com/prod_img/large/group_848/424266_1.jpg?_v=20210601093828",
        title: "포켓몬대시 (DS)",
        url: "https://drive.google.com/file/d/1mtgkoSHbO0P3xXo0DuYVUUqxPaKjCdUg/view",
        category: "DS",
        iframe: false
      },
      {
        icon: "https://image.yes24.com/momo/TopCate56/MidCate01/5503161.jpg",
        title: "프로야구비긴즈 (DS)",
        url: "https://drive.google.com/file/d/1G4el792oItpwKhD9ZLENUb5fmxe9PcXh/view",
        category: "DS",
        iframe: false
      },
      {
        icon: "https://i.namu.wiki/i/bJlOyA7O5XW164HN8A0iQOxKVl2LFTbWPo5m6ss9I68rHr6UaC_rcfyKwDgYYQv1h6n0mlf74fLoFrTBsHdt9w.webp",
        title: "마리오64 (DS)",
        url: "https://drive.google.com/file/d/1mM0QXVlb6n-xbkaRZTxsiog_VQGnedt7/view",
        category: "DS",
        iframe: false
      },
      {
        icon: "https://images.sftcdn.net/images/t_app-icon-m/p/8ddb70b6-a82c-4b5d-a668-400d3c4097f3/3005452743/dolphin-emulator-download%20(1).png",
        title: "돌핀 에뮬 (Wii)",
        url: "https://drive.usercontent.google.com/download?id=1bdUJEEwqx99KvMCGpc6Ir2LcEPKZmB0E&export=download&authuser=0",
        category: "Wii",
        iframe: false
      },
      {
        icon: "https://i.namu.wiki/i/IYKt6LRjs97BZ1b3YVX7xp_89mT4OCwZ8vVYdv0eWf5GUd8kRMtxJVdh_V09wb98ITcMEhAmsH7mJi-0sKOCvw.webp",
        title: "별의커비(Wii)",
        url: "https://drive.google.com/file/d/15gc9gfzb0t3f5eXN-txIdN1-SAvTRCtI/view",
        category: "Wii",
        iframe: false
      },
      {
        icon: "https://img.danawa.com/prod_img/500000/829/793/img/1793829_1.jpg?_v=20190719180323",
        title: "마리오카트(Wii)",
        url: "https://drive.google.com/file/d/1oVeGMcLEHfeDlhwomVA1KQev3Z-cBLzw/view",
        category: "Wii",
        iframe: false
      },
      {
        icon: "https://i.namu.wiki/i/xdH13CPBhGs_xDDzdyHVajOfCSnp2_LElo0r5BB5wDAhomb6cJm02biExr3kZHnGx0f4dDnJvEnVXvt5d6y9aQ.webp",
        title: "뉴슈퍼마리오(Wii)",
        url: "https://drive.google.com/file/d/18xyGEKd6EetciHL4AD7n_blT64xbItDf/view",
        category: "Wii",
        iframe: false
      },
      {
        icon: "https://i.namu.wiki/i/mo45tlkB2ORryX-FGXmiDSUSMfNFjI6Rt2sXmFPuqqT2Y7PStntA-nW5KpvGct6LcEYH72WB7YGSmGYLy-CrVQ.webp",
        title: "리듬세상(Wii)",
        url: "https://drive.google.com/file/d/1QyqKkkX3BGnB6CB0iP3L43yx_Q7HlH0T/view",
        category: "Wii",
        iframe: false
      },
      {
        icon: "https://th.bing.com/th/id/OIP.lG93Mhbxo10kWSaIFSUMkQHaHa?rs=1&pid=ImgDetMain",
        title: "태고의 달인",
        url: "https://cjdgrevival.com/",
        category: "포팅게임",
        iframe: true
      },
      {
        icon: "https://buckshotroulette.online/game-img.png",
        title: "벅샷룰렛",
        url: "https://buckshotroulette.online/game/ver15/",
        category: "Other",
        iframe: false
      },
      {
        icon: "https://static.independent.co.uk/2021/07/15/13/A16I9125-Edit.jpg?width=1200&height=1200&fit=crop",
        title: "니얼굴.mp3",
        url: "https://drive.google.com/file/d/1CLdIEVNFhq7uw3LH7jKyO6b7zEK3phvm/view",
        category: "Other",
        iframe: false
      },
      {
        icon: "https://flexible.img.hani.co.kr/flexible/normal/700/494/imgdb/original/2022/1211/20221211501579.jpg",
        title: "카트라이더",
        url: "https://drive.google.com/file/d/1-dpUvPLd-IFCtB7mO5ywGqZ2iTTNsT-G/view?usp=sharing",
        category: "설치게임",
        iframe: false
      },
      {
        icon: "https://tse4.mm.bing.net/th/id/OIP.FR0HKxIIn8SKBHwoplyCFgHaHa?rs=1&pid=ImgDetMain",
        title: "카트라이더 모음",
        url: "https://drive.google.com/drive/folders/1qDB-JLke-83InAw-spcUr8DHjynTlVuV",
        category: "설치게임",
        iframe: false
      },
      {
        icon: "https://images.g2crowd.com/uploads/product/image/social_landscape/social_landscape_8e412f772704939d73c6eb7f49565adb/lumiproxy.png",
        title: "무료 프록시(가입무필요)",
        url: "https://www.lumiproxy.com/online-proxy/proxysite/",
        category: "VPN",
        iframe: false
      },
      {
        icon: "https://lh3.googleusercontent.com/XG6Ofeh3jEayEoW0X_N7cXiSi2rmymPFkocdnXmsA2tjb1N2J5bCuLYGnNR9ViADK4qVF2JAl9kYMFq5POtBlKbdzzU=s60",
        title: "가입무필요VPN",
        url: "https://chromewebstore.google.com/detail/urban-vpn-proxy/eppiocemhmnlbhjplcgkofciiegomcon?hl=en",
        category: "VPN",
        iframe: false
      },
      {
        icon: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR22kVO2eK8hw0RJ_5Tbw6Jwswx5h5NA12qhA&s",
        title: "GTA 산안드레스 (EGG필요.)",
        url: "https://drive.usercontent.google.com/download?id=1PRfEYawGUujwaQo9XH5cqfi7j2XSKP9P&export=download",
        category: "설치게임",
        iframe: false
      },
      {
        icon: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTC6r7dXP4aXuaZVGfqRaXf_efMS7iI4nThtw&s",
        title: "EGG 파일",
        url: "https://advert.estsoft.com/?event=201005031094508",
        category: "Other",
        iframe: false
      }
    ];

    // 한국어 초성 추출 함수 (비유적 설명: 단어를 분해해서 첫 자음만 추출하는 도구)
    function getKoreanInitials(str) {
      const initials = [
        'ㄱ', 'ㄲ', 'ㄴ', 'ㄷ', 'ㄸ', 'ㄹ', 'ㅁ', 'ㅂ', 'ㅃ',
        'ㅅ', 'ㅆ', 'ㅇ', 'ㅈ', 'ㅉ', 'ㅊ', 'ㅋ', 'ㅌ', 'ㅍ', 'ㅎ'
      ];
      
      return str.split('').map(char => {
        const code = char.charCodeAt(0);
        if (code >= 0xAC00 && code <= 0xD7A3) {
          return initials[Math.floor((code - 0xAC00) / 588)];
        }
        return char;
      }).join('');
    }

    // 타이핑 애니메이션 클래스 (비유적 설명: 글자가 하나씩 나타나는 타자기 효과)
    class TypingAnimation {
      constructor(element, texts, options = {}) {
        this.element = element;
        this.texts = texts;
        this.options = {
          typeSpeed: 120,
          deleteSpeed: 80,
          pauseDelay: 2000,
          loop: true,
          ...options
        };
        this.currentTextIndex = 0;
        this.currentCharIndex = 0;
        this.isDeleting = false;
        this.init();
      }

      init() {
        this.type();
      }

      type() {
        const currentText = this.texts[this.currentTextIndex];
        
        if (this.isDeleting) {
          this.element.textContent = currentText.substring(0, this.currentCharIndex - 1);
          this.currentCharIndex--;
        } else {
          this.element.textContent = currentText.substring(0, this.currentCharIndex + 1);
          this.currentCharIndex++;
        }

        let typeSpeed = this.isDeleting ? this.options.deleteSpeed : this.options.typeSpeed;

        if (!this.isDeleting && this.currentCharIndex === currentText.length) {
          typeSpeed = this.options.pauseDelay;
          this.isDeleting = true;
        } else if (this.isDeleting && this.currentCharIndex === 0) {
          this.isDeleting = false;
          this.currentTextIndex = (this.currentTextIndex + 1) % this.texts.length;
          typeSpeed = 500;
        }

        setTimeout(() => this.type(), typeSpeed);
      }
    }

    // 윈도우 매니저 클래스 (비유적 설명: 여러 창을 관리하는 데스크탑 환경의 관리자)
    class WindowManager {
      constructor() {
        this.windows = new Map();
        this.minimizedWindows = new Map();
        this.nextZIndex = 2001;
        this.activeWindow = null;
        this.currentTooltip = null; // 툴팁 추가
        this.dragState = {
          isDragging: false,
          startX: 0,
          startY: 0,
          offsetX: 0,
          offsetY: 0,
          element: null
        };
        
        this.setupEventListeners();
        this.setupGlobalDragHandlers();
      }

      setupEventListeners() {
        document.addEventListener('click', (e) => {
          if (e.target.closest('.minimized-icon')) {
            const windowId = e.target.closest('.minimized-icon').dataset.windowId;
            this.restoreWindow(windowId);
          } else if (e.target.closest('.close-all-btn')) {
            this.closeAllWindows();
          }
        });
      }

      setupGlobalDragHandlers() {
        document.addEventListener('mousemove', (e) => this.handleGlobalMouseMove(e));
        document.addEventListener('mouseup', (e) => this.handleGlobalMouseUp(e));
      }

      handleGlobalMouseMove(e) {
        if (!this.dragState.isDragging || !this.dragState.element) return;

        e.preventDefault();
        
        const deltaX = e.clientX - this.dragState.startX;
        const deltaY = e.clientY - this.dragState.startY;
        
        const newX = this.dragState.offsetX + deltaX;
        const newY = this.dragState.offsetY + deltaY;
        
        const maxX = window.innerWidth - 200;
        const maxY = window.innerHeight - 100;
        
        const constrainedX = Math.max(-50, Math.min(maxX, newX));
        const constrainedY = Math.max(0, Math.min(maxY, newY));
        
        this.dragState.element.style.left = constrainedX + 'px';
        this.dragState.element.style.top = constrainedY + 'px';
        
        const windowId = this.dragState.element.id;
        const windowData = this.windows.get(windowId);
        if (windowData) {
          windowData.position = { x: constrainedX, y: constrainedY };
        }
      }

      handleGlobalMouseUp(e) {
        if (!this.dragState.isDragging) return;
        
        this.dragState.isDragging = false;
        
        if (this.dragState.element) {
          const overlay = this.dragState.element.querySelector('.window-overlay');
          if (overlay) {
            overlay.style.display = 'none';
            overlay.style.pointerEvents = 'none';
          }
        }
        
        document.body.style.userSelect = '';
        document.body.style.cursor = '';
        
        this.dragState.element = null;
        
        this.focusActiveIframe();
      }

      focusActiveIframe() {
        if (this.activeWindow) {
          const container = document.getElementById(this.activeWindow);
          if (container && container.classList.contains('active')) {
            const iframe = container.querySelector('.window-iframe');
            if (iframe) {
              setTimeout(() => {
                try {
                  iframe.focus();
                  if (iframe.contentWindow) {
                    iframe.contentWindow.focus();
                  }
                } catch (error) {
                  // 크로스 오리진 접근 오류 무시
                  console.debug('Cross-origin iframe focus attempted');
                }
              }, 100);
            }
          }
        }
      }

      openWindow(item) {
        for (let [id, window] of this.windows) {
          if (window.url === item.url) {
            if (this.minimizedWindows.has(id)) {
              this.restoreWindow(id);
            } else {
              this.focusWindow(id);
            }
            return;
          }
        }

        const windowId = this.generateWindowId();
        const windowData = this.createWindowData(item, windowId);
        
        this.windows.set(windowId, windowData);
        this.createWindowElement(windowData);
        this.showWindow(windowData);
      }

      createWindowData(item, windowId) {
        // 추천 아이템의 경우 원래 게임 데이터에서 아이콘 찾기
        let iconUrl = item.icon;
        if (!iconUrl && item.image) {
          // 추천 아이템인 경우 제목으로 원래 데이터 찾기
          const originalItem = GAME_DATA.find(gameItem => 
            gameItem.title.includes(item.title) || item.title.includes(gameItem.title)
          );
          iconUrl = originalItem ? originalItem.icon : item.image;
        }
        
        return {
          id: windowId,
          title: item.title,
          url: item.url,
          icon: iconUrl,
          isMaximized: false,
          wasMaximized: false,
          position: { x: 100 + Math.random() * 200, y: 100 + Math.random() * 100 },
          size: { width: 900, height: 650 },
          normalPosition: null,
          normalSize: null,
          zIndex: this.nextZIndex++
        };
      }

      createWindowElement(windowData) {
        const container = document.createElement('div');
        container.className = 'window-container';
        container.id = windowData.id;
        container.style.left = windowData.position.x + 'px';
        container.style.top = windowData.position.y + 'px';
        container.style.zIndex = windowData.zIndex;

        container.innerHTML = `
          <div class="iframe-window">
            <div class="window-header">
              <h3 class="window-title">${windowData.title}</h3>
              <div class="window-controls">
                <button class="window-btn minimize-btn" title="최소화">
                  <i class="fas fa-minus"></i>
                </button>
                <button class="window-btn maximize-btn" title="최대화/복원">
                  <i class="fas fa-expand"></i>
                </button>
                <button class="window-btn close-btn" title="닫기">
                  <i class="fas fa-times"></i>
                </button>
              </div>
            </div>
            <div class="window-content">
              <iframe class="window-iframe" src="${windowData.url}" allowfullscreen sandbox="allow-scripts allow-same-origin allow-popups allow-forms allow-pointer-lock allow-modals" allow="autoplay; fullscreen; gamepad; gyroscope; accelerometer"></iframe>
              <div class="window-overlay"></div>
            </div>
            <div class="resize-handle"></div>
          </div>
        `;

        document.body.appendChild(container);
        this.setupWindowEvents(container, windowData);
      }

      setupWindowEvents(container, windowData) {
        const header = container.querySelector('.window-header');
        const overlay = container.querySelector('.window-overlay');
        const window = container.querySelector('.iframe-window');
        const closeBtn = container.querySelector('.close-btn');
        const minimizeBtn = container.querySelector('.minimize-btn');
        const maximizeBtn = container.querySelector('.maximize-btn');
        const iframe = container.querySelector('.window-iframe');

        header.addEventListener('mousedown', (e) => this.startDrag(e, container, windowData));

        closeBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          this.closeWindow(windowData.id);
        });
        
        minimizeBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          this.minimizeWindow(windowData.id);
        });
        
        maximizeBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          this.toggleMaximize(windowData.id);
        });

        iframe.addEventListener('load', () => {
          setTimeout(() => {
            if (this.activeWindow === windowData.id) {
              try {
                iframe.focus();
                if (iframe.contentWindow) {
                  iframe.contentWindow.focus();
                }
              } catch (error) {
                // 크로스 오리진 접근 오류 무시
                console.debug('Cross-origin iframe access attempted');
              }
            }
          }, 200);
        });

        container.addEventListener('mousedown', (e) => {
          if (!e.target.closest('.window-controls')) {
            this.focusWindow(windowData.id);
          }
        });

        iframe.addEventListener('mouseenter', () => {
          if (this.activeWindow === windowData.id) {
            setTimeout(() => {
              try {
                iframe.focus();
                if (iframe.contentWindow) {
                  iframe.contentWindow.focus();
                }
              } catch (error) {
                // 크로스 오리진 접근 오류 무시
                console.debug('Cross-origin iframe focus attempted');
              }
            }, 50);
          }
        });
      }

      startDrag(e, container, windowData) {
        const window = container.querySelector('.iframe-window');
        if (window.classList.contains('maximized')) return;
        
        if (e.target.closest('.window-controls')) return;
        
        e.preventDefault();
        e.stopPropagation();
        
        this.dragState.isDragging = true;
        this.dragState.element = container;
        this.dragState.startX = e.clientX;
        this.dragState.startY = e.clientY;
        this.dragState.offsetX = windowData.position.x;
        this.dragState.offsetY = windowData.position.y;
        
        const overlay = container.querySelector('.window-overlay');
        overlay.style.display = 'block';
        overlay.style.pointerEvents = 'auto';
        
        document.body.style.userSelect = 'none';
        document.body.style.cursor = 'move';
        
        this.focusWindow(windowData.id);
      }

      showWindow(windowData) {
        const container = document.getElementById(windowData.id);
        if (container) {
          container.classList.add('active');
          this.focusWindow(windowData.id);
        }
      }

      focusWindow(windowId) {
        const windowData = this.windows.get(windowId);
        if (!windowData) return;

        windowData.zIndex = this.nextZIndex++;
        const container = document.getElementById(windowId);
        if (container) {
          container.style.zIndex = windowData.zIndex;
          
          const iframe = container.querySelector('.window-iframe');
          if (iframe) {
            setTimeout(() => {
              try {
                iframe.focus();
                if (iframe.contentWindow) {
                  iframe.contentWindow.focus();
                }
              } catch (error) {
                // 크로스 오리진 접근 오류 무시
                console.debug('Cross-origin iframe focus attempted');
              }
            }, 100);
          }
        }
        
        this.activeWindow = windowId;
      }

      minimizeWindow(windowId) {
        const windowData = this.windows.get(windowId);
        const container = document.getElementById(windowId);
        if (!windowData || !container) return;

        windowData.wasMaximized = windowData.isMaximized;
        
        if (windowData.isMaximized) {
          document.body.classList.remove('maximized-mode');
          const window = container.querySelector('.iframe-window');
          window.classList.remove('maximized');
          windowData.isMaximized = false;
        }

        const rect = container.getBoundingClientRect();
        windowData.size = { width: rect.width, height: rect.height };
        
        container.style.animation = 'minimizeToIcon 0.3s ease-out forwards';
        
        setTimeout(() => {
          container.classList.remove('active');
          container.style.animation = '';
          this.minimizedWindows.set(windowId, windowData);
          this.updateMinimizedTray();
          
          if (this.activeWindow === windowId) {
            this.activeWindow = null;
          }
        }, 300);
      }

      restoreWindow(windowId) {
        const windowData = this.minimizedWindows.get(windowId) || this.windows.get(windowId);
        const container = document.getElementById(windowId);
        if (!windowData || !container) return;

        if (this.minimizedWindows.has(windowId)) {
          this.minimizedWindows.delete(windowId);
        }

        container.style.animation = 'restoreFromIcon 0.3s ease-out forwards';
        container.classList.add('active');
        
        if (windowData.wasMaximized) {
          setTimeout(() => {
            this.maximizeWindow(windowId);
          }, 300);
        } else {
          container.style.left = windowData.position.x + 'px';
          container.style.top = windowData.position.y + 'px';
        }
        
        setTimeout(() => {
          container.style.animation = '';
          this.focusWindow(windowId);
          this.updateMinimizedTray();
        }, 300);
      }

      toggleMaximize(windowId) {
        const windowData = this.windows.get(windowId);
        if (!windowData) return;

        if (windowData.isMaximized) {
          this.restoreWindowSize(windowId);
        } else {
          this.maximizeWindow(windowId);
        }
      }

      maximizeWindow(windowId) {
        const windowData = this.windows.get(windowId);
        const container = document.getElementById(windowId);
        const window = container.querySelector('.iframe-window');
        const header = container.querySelector('.window-header');
        const maximizeBtn = container.querySelector('.maximize-btn');
        
        if (!windowData || !container) return;

        if (!windowData.isMaximized) {
          windowData.normalPosition = { ...windowData.position };
          const rect = container.getBoundingClientRect();
          windowData.normalSize = { width: rect.width, height: rect.height };
        }

        window.classList.add('maximized');
        header.classList.add('no-drag');
        container.style.left = '0px';
        container.style.top = '0px';
        maximizeBtn.innerHTML = '<i class="fas fa-compress"></i>';
        maximizeBtn.title = '복원';
        windowData.isMaximized = true;
        
        document.body.classList.add('maximized-mode');
        
        setTimeout(() => {
          this.focusActiveIframe();
        }, 100);
      }

      restoreWindowSize(windowId) {
        const windowData = this.windows.get(windowId);
        const container = document.getElementById(windowId);
        const window = container.querySelector('.iframe-window');
        const header = container.querySelector('.window-header');
        const maximizeBtn = container.querySelector('.maximize-btn');
        
        if (!windowData || !container) return;

        window.classList.remove('maximized');
        header.classList.remove('no-drag');
        
        if (windowData.normalPosition) {
          container.style.left = windowData.normalPosition.x + 'px';
          container.style.top = windowData.normalPosition.y + 'px';
          windowData.position = { ...windowData.normalPosition };
        }
        
        if (windowData.normalSize) {
          container.style.width = windowData.normalSize.width + 'px';
          container.style.height = windowData.normalSize.height + 'px';
        }
        
        maximizeBtn.innerHTML = '<i class="fas fa-expand"></i>';
        maximizeBtn.title = '최대화';
        windowData.isMaximized = false;
        
        document.body.classList.remove('maximized-mode');
      }

      closeWindow(windowId) {
        const container = document.getElementById(windowId);
        if (container) {
          const iframe = container.querySelector('.window-iframe');
          if (iframe) {
            iframe.src = '';
          }
          container.remove();
        }
        
        this.windows.delete(windowId);
        this.minimizedWindows.delete(windowId);
        this.updateMinimizedTray();
        
        if (this.activeWindow === windowId) {
          this.activeWindow = null;
          document.body.classList.remove('maximized-mode');
        }
      }

      closeAllWindows() {
        for (let windowId of this.windows.keys()) {
          this.closeWindow(windowId);
        }
        document.body.classList.remove('maximized-mode');
      }

      updateMinimizedTray() {
        const tray = document.getElementById('minimizedWindows');
        tray.innerHTML = '';

        const minimizedArray = Array.from(this.minimizedWindows.values());
        
        minimizedArray.forEach(windowData => {
          const icon = document.createElement('div');
          icon.className = 'minimized-icon';
          icon.title = windowData.title;
          icon.dataset.windowId = windowData.id;
          icon.dataset.appName = windowData.title;
          icon.setAttribute('aria-label', windowData.title);
          
          // 추천 게임의 경우 올바른 아이콘 찾기
          let correctIcon = windowData.icon;
          if (windowData.title === "태고의 달인") {
            correctIcon = "https://th.bing.com/th/id/OIP.lG93Mhbxo10kWSaIFSUMkQHaHa?rs=1&pid=ImgDetMain";
          } else if (windowData.title === "언더테일") {
            correctIcon = "https://upload.wikimedia.org/wikipedia/commons/thumb/8/8e/Undertale_red_soul.svg/250px-Undertale_red_soul.svg.png";
          }
          
          const img = document.createElement('img');
          img.src = correctIcon;
          img.onerror = () => {
            img.classList.add('failed');
            img.style.display = 'none';
          };
          
          const fallbackIcon = document.createElement('i');
          fallbackIcon.className = 'fas fa-window-maximize fallback-icon';
          
          // 마우스 이벤트로 툴팁 직접 관리
          icon.addEventListener('mouseenter', (e) => {
            this.showTooltip(e.currentTarget, windowData.title);
          });
          
          icon.addEventListener('mouseleave', () => {
            this.hideTooltip();
          });
          
          icon.appendChild(img);
          icon.appendChild(fallbackIcon);
          tray.appendChild(icon);
        });

        if (this.minimizedWindows.size > 1) {
          const closeAllBtn = document.createElement('button');
          closeAllBtn.className = 'close-all-btn';
          closeAllBtn.textContent = '모두 닫기';
          tray.appendChild(closeAllBtn);
        }
      }

      // 툴팁을 직접 body에 생성하여 완전히 제어
      showTooltip(iconElement, text) {
        this.hideTooltip(); // 기존 툴팁 제거
        
        const tooltip = document.createElement('div');
        tooltip.className = 'dynamic-tooltip';
        tooltip.textContent = text;
        
        const rect = iconElement.getBoundingClientRect();
        const tooltipWidth = text.length * 8 + 28; // 텍스트 길이에 따른 동적 계산
        const tooltipHeight = 36;
        
        // 아이콘 오른쪽에 위치 (더 멀리 띄움)
        let left = rect.right + 28; // 16px에서 28px로 증가
        let top = rect.top + (rect.height / 2) - (tooltipHeight / 2);
        
        // 화면 끝 체크 후 왼쪽으로 이동
        if (left + tooltipWidth > window.innerWidth - 20) {
          left = rect.left - tooltipWidth - 28; // 왼쪽도 28px로 조정
        }
        
        // 상하 위치 조정
        if (top < 20) top = 20;
        if (top + tooltipHeight > window.innerHeight - 20) {
          top = window.innerHeight - tooltipHeight - 20;
        }
        
        tooltip.style.cssText = `
          position: fixed;
          left: ${left}px;
          top: ${top}px;
          background: rgba(0, 0, 0, 0.9);
          color: white;
          padding: 8px 14px;
          border-radius: 8px;
          font-size: 13px;
          font-weight: 500;
          white-space: nowrap;
          z-index: 10000;
          pointer-events: none;
          border: 1px solid rgba(255, 255, 255, 0.2);
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
          opacity: 1;
          backdrop-filter: blur(8px);
        `;
        
        document.body.appendChild(tooltip);
        this.currentTooltip = tooltip;
      }

      hideTooltip() {
        if (this.currentTooltip) {
          this.currentTooltip.remove();
          this.currentTooltip = null;
        }
      }

      generateWindowId() {
        return 'window_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
      }
    }

    // 메인 앱 클래스 (비유적 설명: 웹사이트 전체를 관리하는 지휘탑)
    class ArchiveApp {
      constructor() {
        this.windowManager = new WindowManager();
        this.favorites = this.loadFavorites();
        this.currentCategory = 'all';
        this.searchQuery = '';
        this.secretPassphrase = 'qlalfqjsgh';
        this.init();
      }

      init() {
        this.setupElements();
        this.setupEventListeners();
        this.showLoading();
        this.initTypingAnimation();
        this.disableDevTools();
        this.initChatSystem();
      }

      // 개발자 도구 비활성화 (보안 목적)
      disableDevTools() {
        document.addEventListener('contextmenu', (e) => e.preventDefault());
        
        document.addEventListener('keydown', (e) => {
          if (e.key === 'F12' || 
              (e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'J' || e.key === 'C')) ||
              (e.ctrlKey && e.key === 'U')) {
            e.preventDefault();
            return false;
          }
        });
      }

      // 타이핑 애니메이션 초기화
      initTypingAnimation() {
        const typingElement = document.getElementById('typingText');
        const texts = [
          '진채형 파일아카이브',
          'VPN 이나 게임파일들',
          '편한 도구들을 빠르게 설치'
        ];
        
        if (typingElement) {
          new TypingAnimation(typingElement, texts, {
            typeSpeed: 90,
            deleteSpeed: 60,
            pauseDelay: 1800
          });
        }
      }

      setupElements() {
        this.elements = {
          loadingOverlay: document.getElementById('loadingOverlay'),
          loginScreen: document.getElementById('loginScreen'),
          passwordInput: document.getElementById('passwordInput'),
          passwordSubmit: document.getElementById('passwordSubmit'),
          app: document.getElementById('app'),
          
          searchInput: document.getElementById('searchInput'),
          searchSection: document.getElementById('searchSection'),
          categoryFilter: document.getElementById('categoryFilter'),
          categoryList: document.getElementById('categoryList'),
          
          featuredSection: document.getElementById('featuredSection'),
          featuredGrid: document.getElementById('featuredGrid'),
          
          itemsGrid: document.getElementById('itemsGrid'),
          emptyState: document.getElementById('emptyState'),
          scrollTop: document.getElementById('scrollTop'),
          
          chatWidget: document.getElementById('chatWidget'),
          chatToggle: document.getElementById('chatToggle'),
          chatClose: document.getElementById('chatClose')
        };
      }

      // 즐겨찾기 로드
      loadFavorites() {
        try {
          const saved = localStorage.getItem('archiveFavorites');
          return saved ? new Set(JSON.parse(saved)) : new Set();
        } catch (error) {
          return new Set();
        }
      }

      // 즐겨찾기 저장
      saveFavorites() {
        try {
          localStorage.setItem('archiveFavorites', JSON.stringify(Array.from(this.favorites)));
        } catch (error) {
          // 로컬스토리지 저장 실패 시 조용히 무시
        }
      }

      setupEventListeners() {
        this.elements.passwordSubmit.addEventListener('click', () => this.validatePassword());
        this.elements.passwordInput.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') this.validatePassword();
        });

        let searchTimeout;
        this.elements.searchInput.addEventListener('input', (e) => {
          clearTimeout(searchTimeout);
          searchTimeout = setTimeout(() => {
            this.searchQuery = e.target.value.toLowerCase().trim();
            this.updateFeaturedVisibility();
            this.renderItems();
          }, 300);
        });

        this.elements.categoryFilter.addEventListener('change', (e) => {
          this.selectCategory(e.target.value);
        });

        window.addEventListener('scroll', () => this.handleScroll());
        this.elements.scrollTop.addEventListener('click', () => this.scrollToTop());

        this.elements.searchInput.addEventListener('focus', (e) => {
          e.target.select();
        });
      }

      // 채팅 시스템 초기화
      initChatSystem() {
        this.elements.chatToggle.addEventListener('click', () => {
          this.elements.chatWidget.classList.add('active');
        });

        this.elements.chatClose.addEventListener('click', () => {
          this.elements.chatWidget.classList.remove('active');
        });
      }

      // 로딩 화면 표시
      showLoading() {
        setTimeout(() => {
          this.elements.loadingOverlay.style.opacity = '0';
          setTimeout(() => {
            this.elements.loadingOverlay.style.display = 'none';
          }, 300);
        }, 1800);
      }

      // 비밀번호 검증
      validatePassword() {
        const input = this.elements.passwordInput;
        if (input.value === this.secretPassphrase) {
          this.elements.loginScreen.style.opacity = '0';
          setTimeout(() => {
            this.elements.loginScreen.style.display = 'none';
            this.elements.app.style.display = 'block';
            this.initializeApp();
          }, 500);
        } else {
          input.classList.add('error-shake');
          input.style.borderColor = '#ef4444';
          input.value = '';
          setTimeout(() => {
            input.classList.remove('error-shake');
            input.style.borderColor = '';
          }, 600);
        }
      }

      // 앱 초기화
      initializeApp() {
        this.generateCategoryTags();
        this.renderFeatured();
        this.updateFeaturedVisibility();
        this.renderItems();
      }

      // 카테고리 태그 생성
      generateCategoryTags() {
        const categories = ['all', ...new Set(GAME_DATA.map(item => item.category))];
        const categoryNames = {
          'all': '전체',
          'DS': 'DS',
          'Wii': 'Wii',
          'Switch': '스위치',
          'VPN': 'VPN',
          'Other': '기타'
        };

        this.elements.categoryList.innerHTML = '';
        
        categories.forEach(category => {
          const tag = document.createElement('button');
          tag.className = `category-tag ${category === 'all' ? 'active' : ''}`;
          tag.innerHTML = `<span>${categoryNames[category] || category}</span>`;
          tag.dataset.category = category;
          tag.addEventListener('click', () => this.selectCategory(category));
          this.elements.categoryList.appendChild(tag);
        });
      }

      // 추천 게임 렌더링
      renderFeatured() {
        this.elements.featuredGrid.innerHTML = '';
        
        FEATURED_ITEMS.forEach((item, index) => {
          const card = document.createElement('div');
          card.className = 'featured-card';
          card.innerHTML = `
            <div class="featured-badge">추천</div>
            <img src="${item.image}" alt="${item.title}" class="featured-image">
            <div class="featured-content">
              <h3 class="featured-item-title">${item.title}</h3>
              <p class="featured-description">${item.description}</p>
              <button class="featured-play-btn" data-index="${index}">
                <i class="fas fa-play"></i>
                지금 플레이하기
              </button>
            </div>
          `;

          const playBtn = card.querySelector('.featured-play-btn');
          playBtn.addEventListener('click', () => {
            this.handleFeaturedClick(item);
          });

          this.elements.featuredGrid.appendChild(card);
        });
      }

      // 추천 게임 클릭 처리
      handleFeaturedClick(item) {
        if (item.iframe) {
          this.windowManager.openWindow(item);
        } else {
          const newWindow = window.open(item.url, '_blank', 'noopener,noreferrer');
          if (!newWindow) {
            this.showNotification('팝업이 차단되었습니다. 브라우저 설정에서 팝업을 허용해주세요.');
          }
        }
      }

      // 추천 섹션 표시/숨김
      updateFeaturedVisibility() {
        const shouldShow = this.currentCategory === 'all' && this.searchQuery === '';
        this.elements.featuredSection.style.display = shouldShow ? 'block' : 'none';
      }

      // 카테고리 선택
      selectCategory(category) {
        this.currentCategory = category;
        this.elements.categoryFilter.value = category;
        
        document.querySelectorAll('.category-tag').forEach(tag => {
          tag.classList.toggle('active', tag.dataset.category === category);
        });
        
        this.updateFeaturedVisibility();
        this.renderItems();
      }

      // 필터링된 아이템 가져오기
      getFilteredItems() {
        let filteredItems = GAME_DATA.filter(item => {
          let matchesSearch = true;
          
          if (this.searchQuery) {
            const title = item.title.toLowerCase();
            const query = this.searchQuery;
            
            const normalMatch = title.includes(query);
            const titleInitials = getKoreanInitials(item.title).toLowerCase();
            const initialMatch = titleInitials.includes(query);
            
            matchesSearch = normalMatch || initialMatch;
          }
          
          const matchesCategory = this.currentCategory === 'all' || 
            item.category === this.currentCategory;
            
          return matchesSearch && matchesCategory;
        });

        return filteredItems.sort((a, b) => {
          const aIndex = GAME_DATA.indexOf(a);
          const bIndex = GAME_DATA.indexOf(b);
          const aFavorite = this.favorites.has(aIndex);
          const bFavorite = this.favorites.has(bIndex);
          
          if (aFavorite && !bFavorite) return -1;
          if (!aFavorite && bFavorite) return 1;
          return 0;
        });
      }

      // 즐겨찾기 토글
      toggleFavorite(index) {
        if (this.favorites.has(index)) {
          this.favorites.delete(index);
        } else {
          this.favorites.add(index);
        }
        this.saveFavorites();
        
        this.updateFavoriteUI(index);
        
        setTimeout(() => {
          this.renderItems();
        }, 100);
      }

      // 즐겨찾기 UI 업데이트
      updateFavoriteUI(index) {
        const card = document.querySelector(`[data-index="${index}"]`)?.closest('.item-card');
        if (card) {
          const favBtn = card.querySelector('.favorite-btn');
          const isFavorite = this.favorites.has(index);
          
          if (isFavorite) {
            favBtn.classList.add('active');
            favBtn.querySelector('i').className = 'fas fa-heart';
            card.classList.add('favorite');
          } else {
            favBtn.classList.remove('active');
            favBtn.querySelector('i').className = 'far fa-heart';
            card.classList.remove('favorite');
          }
        }
      }

      // 아이템 클릭 처리
      handleItemClick(item, index) {
        if (item.iframe) {
          this.windowManager.openWindow(item);
        } else {
          const newWindow = window.open(item.url, '_blank', 'noopener,noreferrer');
          if (!newWindow) {
            this.showNotification('팝업이 차단되었습니다. 브라우저 설정에서 팝업을 허용해주세요.');
          }
        }
      }

      // 알림 표시
      showNotification(message) {
        const existing = document.querySelector('.notification');
        if (existing) existing.remove();

        const notification = document.createElement('div');
        notification.className = 'notification';
        notification.textContent = message;
        notification.style.cssText = `
          position: fixed;
          top: 30px;
          left: 50%;
          transform: translateX(-50%);
          background: rgba(255, 255, 255, 0.1);
          backdrop-filter: var(--blur-md);
          border: 1px solid rgba(255, 255, 255, 0.2);
          padding: 20px 30px;
          border-radius: 15px;
          font-size: 15px;
          z-index: 3000;
          animation: slideDown 0.4s ease;
          max-width: 500px;
          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
          color: white;
          text-align: center;
        `;
        
        document.body.appendChild(notification);
        setTimeout(() => {
          notification.style.opacity = '0';
          notification.style.transform = 'translateX(-50%) translateY(-20px)';
          setTimeout(() => notification.remove(), 300);
        }, 3500);
      }

      // 아이템 카드 생성
      createItemCard(item, index, delay = 0) {
        const card = document.createElement('div');
        const isFavorite = this.favorites.has(index);
        card.className = `item-card ${isFavorite ? 'favorite' : ''}`;
        card.style.animationDelay = `${delay}ms`;
        
        card.innerHTML = `
          <div class="card-header">
            <img src="${item.icon}" alt="${item.title}" class="item-icon" loading="lazy" onerror="if(!this.dataset.failed){this.dataset.failed='true';this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTYiIGhlaWdodD0iNTYiIHZpZXdCb3g9IjAgMCA1NiA1NiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iMTYiIGZpbGw9InRyYW5zcGFyZW50Ii8+PHN2ZyB4PSIxNiIgeT0iMTYiIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIj4KPHBhdGggZD0iTTEyIDJMMTMuMDkgOC4yNkwyMSA5TDEzLjA5IDE1Ljc0TDEyIDIyTDEwLjkxIDE1Ljc0TDMgOUwxMC45MSA4LjI2TDEyIDJaIiBzdHJva2U9IiM3Mzc3MzciLz4KPC9zdmc+PC9zdmc+';}">
            <h3 class="item-title">${item.title}</h3>
          </div>
          <div class="card-actions">
            <button class="action-btn primary" data-index="${index}">
              <i class="fas fa-${item.iframe ? 'play' : 'download'}"></i>
              ${item.iframe ? '실행' : '다운로드'}
            </button>
            <button class="action-btn favorite-btn ${isFavorite ? 'active' : ''}" data-index="${index}">
              <i class="fa${isFavorite ? 's' : 'r'} fa-heart"></i>
            </button>
          </div>
        `;

        const mainBtn = card.querySelector('.action-btn.primary');
        mainBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          this.handleItemClick(item, index);
        });

        const favBtn = card.querySelector('.favorite-btn');
        favBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          this.toggleFavorite(index);
        });

        return card;
      }

      // 아이템 렌더링
      renderItems() {
        const filteredItems = this.getFilteredItems();
        
        this.elements.itemsGrid.innerHTML = '';

        if (filteredItems.length === 0) {
          this.elements.emptyState.style.display = 'block';
          return;
        }

        this.elements.emptyState.style.display = 'none';

        filteredItems.forEach((item, displayIndex) => {
          const originalIndex = GAME_DATA.indexOf(item);
          const delay = displayIndex * 50;
          
          const card = this.createItemCard(item, originalIndex, delay);
          this.elements.itemsGrid.appendChild(card);
        });
      }

      // 스크롤 처리
      handleScroll() {
        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
        this.elements.scrollTop.classList.toggle('visible', scrollTop > 500);
      }

      // 맨 위로 스크롤
      scrollToTop() {
        window.scrollTo({ 
          top: 0, 
          behavior: 'smooth' 
        });
      }
    }

    // 성능 최적화 함수
    const performanceOptimizations = () => {
      // Intersection Observer를 사용한 지연 로딩
      if ('IntersectionObserver' in window) {
        const imageObserver = new IntersectionObserver((entries, observer) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              const img = entry.target;
              if (img.dataset.src) {
                img.src = img.dataset.src;
                img.removeAttribute('data-src');
                observer.unobserve(img);
              }
            }
          });
        });

        document.querySelectorAll('img[data-src]').forEach(img => {
          imageObserver.observe(img);
        });
      }

      // 페이지 언로드 시 정리
      window.addEventListener('beforeunload', () => {
        document.querySelectorAll('.window-iframe').forEach(iframe => {
          iframe.src = '';
        });
        
        // 이벤트 리스너 정리
        document.removeEventListener('mousemove', null);
        document.removeEventListener('mouseup', null);
        document.removeEventListener('contextmenu', null);
      });
    };

    // DOM 로드 완료 시 앱 초기화
    document.addEventListener('DOMContentLoaded', () => {
      performanceOptimizations();
      
      window.appInstance = new ArchiveApp();
      
      // 전역 에러 핸들링
      window.addEventListener('error', (e) => {
        console.debug('Error caught:', e.message);
      });

      // requestAnimationFrame 폴리필
      if (!window.requestAnimationFrame) {
        window.requestAnimationFrame = function(callback) {
          return setTimeout(callback, 1000 / 60);
        };
      }
    });
  </script>
</body>
</html>
